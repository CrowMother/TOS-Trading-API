from Modules import streamer
from Modules import data as Data
import json
import re



def send_test_trade_order():
    testList = [
        '{"data":[{"service":"ACCT_ACTIVITY", "timestamp":1728398821893,"command":"SUBS","content":[{"seq":1,"key":"Account Activity","1":"54661285","2":"OrderCreated","3":"{\"SchwabOrderID\":\"1001818110907\",\"AccountNumber\":\"54661285\",\"BaseEvent\":{\"EventType\":\"OrderCreated\",\"OrderCreatedEventEquityOrder\":{\"EventType\":\"OrderCreated\",\"Order\":{\"SchwabOrderID\":\"1001818110907\",\"AccountNumber\":\"54661285\",\"Order\":{\"AccountInfo\":{\"AccountNumber\":\"54661285\",\"AccountBranch\":\"WT\",\"CustomerOrFirmCode\":\"CustomerOrFirmCode_Customer\",\"OrderPlacementCustomerID\":\"353286754\",\"AccountState\":\"MO\",\"AccountTypeCode\":\"Customer\"},\"ClientChannelInfo\":{\"ClientProductCode\":\"M1\",\"EventUserID\":\"O1XX\",\"EventUserType\":\"Client\"},\"LifecycleCreatedTimestamp\":{\"DateTimeString\":\"2024-10-08 10:47:01.773\"},\"LifecycleSchwabOrderID\":\"1001818110907\",\"EntryTimestamp\":{\"DateTimeString\":\"2024-10-08 10:47:01.773\"},\"ExpiryTimeStamp\":{\"DateTimeString\":\"2024-10-08\"},\"AutoConfirm\":true,\"PlanSubmitDate\":{\"DateTimeString\":\"2024-10-08\"},\"SourceOMS\":\"ngOMS\",\"FirmID\":\"CHAS\",\"OrderAccount\":\"TDAAccount\",\"AssetOrderEquityOrderLeg\":{\"OrderInstruction\":{\"HandlingInstructionCode\":\"AutomatedExecutionNoIntervention\",\"ExecutionStrategy\":{\"Type\":\"ES_Limit\",\"LimitExecutionStrategy\":{\"Type\":\"ES_Limit\",\"LimitPrice\":{\"lo\":\"2280000\",\"signScale\":12},\"LimitPriceUnitCode\":\"Units\"}},\"PreferredRoute\":{},\"EquityOrderInstruction\":{}},\"CommissionInfo\":{\"EstimatedOrderQuantity\":{\"lo\":\"1000000\",\"signScale\":12},\"EstimatedPrincipalAmount\":{\"lo\":\"228000000\",\"signScale\":12},\"EstimatedCommissionAmount\":{\"lo\":\"650000\",\"signScale\":12}},\"AssetType\":\"MajorAssetType_EquityOption\",\"TimeInForce\":\"Day\",\"OrderTypeCode\":\"Limit\",\"OrderLegs\":[{\"LegID\":\"1001818110907\",\"LegParentSchwabOrderID\":\"1001818110907\",\"Quantity\":{\"lo\":\"1000000\",\"signScale\":12},\"QuantityUnitCodeType\":\"SharesOrUnits\",\"LeavesQuantity\":{\"lo\":\"1000000\",\"signScale\":12},\"BuySellCode\":\"Sell\",\"Security\":{\"SchwabSecurityID\":\"102617596\",\"Symbol\":\"NVDA  241011C00133000\",\"UnderlyingSymbol\":\"NVDA\",\"MajorAssetType\":\"MajorAssetType_EquityOption\",\"PrimaryMarketSymbol\":\"NVDA  241011C00133000\",\"ShortDescriptionText\":\"NVIDIA CORP 10\/11\/2024 $133 Call\",\"ShortName\":\"NVIDIA CORP 10\/11\/2024 $133 Call\",\"CUSIP\":\"0NVDA.JB40133000\",\"OptionsSecurityInfo\":{\"PutCallCode\":\"Call\",\"UnderlyingSchwabSecurityID\":\"382397811\",\"StrikePrice\":{\"lo\":\"133000000\",\"signScale\":12},\"OptionExpiryDate\":{\"DateTimeString\":\"2024-10-11 00:00:00.000\"}}},\"QuoteOnOrderAcceptance\":{\"Ask\":{\"lo\":\"2310000\",\"signScale\":12},\"AskSize\":{\"lo\":\"64\"},\"Bid\":{\"lo\":\"2290000\",\"signScale\":12},\"BidSize\":{\"lo\":\"86\"},\"QuoteTimestamp\":{\"DateTimeString\":\"2024-10-08 10:47:01.773\"},\"Symbol\":\"NVDA  241011C00133000\",\"QuoteTypeCode\":\"Mark\",\"Mid\":{\"lo\":\"2300000\",\"signScale\":13},\"SchwabOrderID\":\"1001818110907\",\"OptionsQuote\":{\"PutCallCode\":\"Call\"}},\"LegClientRequestInfo\":{\"SecurityId\":\"NVDA  241011C00133000\",\"SecurityIdTypeCd\":\"Symbol\"},\"AccountingRuleCode\":\"Cash\",\"EstimatedNetAmount\":{\"lo\":\"227350000\",\"signScale\":12},\"EstimatedPrincipalAmnt\":{\"lo\":\"228000000\",\"signScale\":12},\"EquityOrderLeg\":{\"EquityOptionsOrderLeg\":{\"OpenClosePositionCode\":\"PC_Close\"}}}],\"OrderCapacityCode\":\"OC_Agency\",\"SettlementType\":\"SettlementType_Regular\",\"Rule80ACode\":73,\"SolicitedCode\":\"Unsolicited\",\"TradeTag\":\"API_TOS:POS_STMT\",\"EquityOrder\":{\"TradingSessionCodeOnOrder\":\"REG\"}}}}}}}"},{"seq":2,"key":"Account Activity","1":"54661285","2":"OrderAccepted","3":"{\"SchwabOrderID\":\"1001818110907\",\"AccountNumber\":\"54661285\",\"BaseEvent\":{\"EventType\":\"OrderAccepted\",\"OrderAcceptedEvent\":{\"EventType\":\"OrderAccepted\",\"CreatedTimeStamp\":{\"DateTimeString\":\"2024-10-08 10:47:01.773\"},\"ExpiryTimeStamp\":{\"DateTimeString\":\"2024-10-08\"},\"Status\":\"Open\",\"TradingSessionCodeOnOrderEntry\":\"REG\",\"QuoteOnOrderEntry\":[{\"Ask\":{\"lo\":\"2310000\",\"signScale\":12},\"AskSize\":{\"lo\":\"64\"},\"Bid\":{\"lo\":\"2290000\",\"signScale\":12},\"BidSize\":{\"lo\":\"86\"},\"QuoteTimestamp\":{\"DateTimeString\":\"2024-10-08 10:47:01.773\"},\"Symbol\":\"NVDA  241011C00133000\",\"QuoteTypeCode\":\"Mark\",\"Mid\":{\"lo\":\"2300000\",\"signScale\":13},\"SchwabOrderID\":\"1001818110907\",\"OptionsQuote\":{\"PutCallCode\":\"Call\"}}]}}}"}]}]}',
        '[2024-10-08 14:49:11] {"data":[{"service":"ACCT_ACTIVITY", "timestamp":1728398951101,"command":"SUBS","content":[{"seq":1,"key":"Account Activity","1":"54661285","2":"OrderCreated","3":"{\"SchwabOrderID\":\"1001818111253\",\"AccountNumber\":\"54661285\",\"BaseEvent\":{\"EventType\":\"OrderCreated\",\"OrderCreatedEventEquityOrder\":{\"EventType\":\"OrderCreated\",\"Order\":{\"SchwabOrderID\":\"1001818111253\",\"AccountNumber\":\"54661285\",\"Order\":{\"AccountInfo\":{\"AccountNumber\":\"54661285\",\"AccountBranch\":\"WT\",\"CustomerOrFirmCode\":\"CustomerOrFirmCode_Customer\",\"OrderPlacementCustomerID\":\"353286754\",\"AccountState\":\"MO\",\"AccountTypeCode\":\"Customer\"},\"ClientChannelInfo\":{\"ClientProductCode\":\"M1\",\"EventUserID\":\"O1XX\",\"EventUserType\":\"Client\"},\"LifecycleCreatedTimestamp\":{\"DateTimeString\":\"2024-10-08 10:49:10.976\"},\"LifecycleSchwabOrderID\":\"1001818111253\",\"EntryTimestamp\":{\"DateTimeString\":\"2024-10-08 10:49:10.976\"},\"ExpiryTimeStamp\":{\"DateTimeString\":\"2024-10-08\"},\"AutoConfirm\":true,\"PlanSubmitDate\":{\"DateTimeString\":\"2024-10-08\"},\"SourceOMS\":\"ngOMS\",\"FirmID\":\"CHAS\",\"OrderAccount\":\"TDAAccount\",\"AssetOrderEquityOrderLeg\":{\"OrderInstruction\":{\"HandlingInstructionCode\":\"AutomatedExecutionNoIntervention\",\"ExecutionStrategy\":{\"Type\":\"ES_Limit\",\"LimitExecutionStrategy\":{\"Type\":\"ES_Limit\",\"LimitPrice\":{\"lo\":\"2340000\",\"signScale\":12},\"LimitPriceUnitCode\":\"Units\"}},\"PreferredRoute\":{},\"EquityOrderInstruction\":{}},\"CommissionInfo\":{\"EstimatedOrderQuantity\":{\"lo\":\"1000000\",\"signScale\":12},\"EstimatedPrincipalAmount\":{\"lo\":\"234000000\",\"signScale\":12},\"EstimatedCommissionAmount\":{\"lo\":\"650000\",\"signScale\":12}},\"AssetType\":\"MajorAssetType_EquityOption\",\"TimeInForce\":\"Day\",\"OrderTypeCode\":\"Limit\",\"OrderLegs\":[{\"LegID\":\"1001818111253\",\"LegParentSchwabOrderID\":\"1001818111253\",\"Quantity\":{\"lo\":\"1000000\",\"signScale\":12},\"QuantityUnitCodeType\":\"SharesOrUnits\",\"LeavesQuantity\":{\"lo\":\"1000000\",\"signScale\":12},\"BuySellCode\":\"Sell\",\"Security\":{\"SchwabSecurityID\":\"102617596\",\"Symbol\":\"NVDA  241011C00133000\",\"UnderlyingSymbol\":\"NVDA\",\"MajorAssetType\":\"MajorAssetType_EquityOption\",\"PrimaryMarketSymbol\":\"NVDA  241011C00133000\",\"ShortDescriptionText\":\"NVIDIA CORP 10\/11\/2024 $133 Call\",\"ShortName\":\"NVIDIA CORP 10\/11\/2024 $133 Call\",\"CUSIP\":\"0NVDA.JB40133000\",\"OptionsSecurityInfo\":{\"PutCallCode\":\"Call\",\"UnderlyingSchwabSecurityID\":\"382397811\",\"StrikePrice\":{\"lo\":\"133000000\",\"signScale\":12},\"OptionExpiryDate\":{\"DateTimeString\":\"2024-10-11 00:00:00.000\"}}},\"QuoteOnOrderAcceptance\":{\"Ask\":{\"lo\":\"2350000\",\"signScale\":12},\"AskSize\":{\"lo\":\"43\"},\"Bid\":{\"lo\":\"2330000\",\"signScale\":12},\"BidSize\":{\"lo\":\"32\"},\"QuoteTimestamp\":{\"DateTimeString\":\"2024-10-08 10:49:10.976\"},\"Symbol\":\"NVDA  241011C00133000\",\"QuoteTypeCode\":\"Mark\",\"Mid\":{\"lo\":\"2340000\",\"signScale\":13},\"SchwabOrderID\":\"1001818111253\",\"OptionsQuote\":{\"PutCallCode\":\"Call\"}},\"LegClientRequestInfo\":{\"SecurityId\":\"NVDA  241011C00133000\",\"SecurityIdTypeCd\":\"Symbol\"},\"AccountingRuleCode\":\"Cash\",\"EstimatedNetAmount\":{\"lo\":\"233350000\",\"signScale\":12},\"EstimatedPrincipalAmnt\":{\"lo\":\"234000000\",\"signScale\":12},\"EquityOrderLeg\":{\"EquityOptionsOrderLeg\":{\"OpenClosePositionCode\":\"PC_Close\"}}}],\"OrderCapacityCode\":\"OC_Agency\",\"SettlementType\":\"SettlementType_Regular\",\"Rule80ACode\":73,\"SolicitedCode\":\"Unsolicited\",\"TradeTag\":\"API_TOS:TRADE_ALL\",\"EquityOrder\":{\"TradingSessionCodeOnOrder\":\"REG\"}}}}}}}"}]}]}',
        '{"response":[{"service":"ACCT_ACTIVITY","command":"ADD","requestid":"5","SchwabClientCorrelId":"4cd1648f-b6c8-6daf-095b-bf2bdf73b761","timestamp":1728398823943,"content":{"code":0,"msg":"ADD command succeeded"}}]}',
    ]
    
    for trade in testList:
        streamer.my_handler(trade)


