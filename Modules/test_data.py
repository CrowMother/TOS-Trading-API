from Modules import streamer
from Modules import trade_processing as Data
import json
import re



def send_test_trade_order():
    testList = [
        '{"data":[{"service":"ACCT_ACTIVITY", "timestamp":1729606926741,"command":"SUBS","content":[{"seq":7,"key":"Account Activity","1":"54661285","2":"OrderCreated","3":"{\"SchwabOrderID\":\"1001953543149\",\"AccountNumber\":\"54661285\",\"BaseEvent\":{\"EventType\":\"OrderCreated\",\"OrderCreatedEventEquityOrder\":{\"EventType\":\"OrderCreated\",\"Order\":{\"SchwabOrderID\":\"1001953543149\",\"AccountNumber\":\"54661285\",\"Order\":{\"AccountInfo\":{\"AccountNumber\":\"54661285\",\"AccountBranch\":\"WT\",\"CustomerOrFirmCode\":\"CustomerOrFirmCode_Customer\",\"OrderPlacementCustomerID\":\"353286754\",\"AccountState\":\"MO\",\"AccountTypeCode\":\"Customer\"},\"ClientChannelInfo\":{\"ClientProductCode\":\"M1\",\"EventUserID\":\"O1XX\",\"EventUserType\":\"Client\"},\"LifecycleCreatedTimestamp\":{\"DateTimeString\":\"2024-10-22 10:22:06.606\"},\"LifecycleSchwabOrderID\":\"1001953543149\",\"EntryTimestamp\":{\"DateTimeString\":\"2024-10-22 10:22:06.606\"},\"ExpiryTimeStamp\":{\"DateTimeString\":\"2024-10-22\"},\"AutoConfirm\":true,\"PlanSubmitDate\":{\"DateTimeString\":\"2024-10-22\"},\"SourceOMS\":\"ngOMS\",\"FirmID\":\"CHAS\",\"OrderAccount\":\"TDAAccount\",\"AssetOrderEquityOrderLeg\":{\"OrderInstruction\":{\"HandlingInstructionCode\":\"AutomatedExecutionNoIntervention\",\"ExecutionStrategy\":{\"Type\":\"ES_Limit\",\"LimitExecutionStrategy\":{\"Type\":\"ES_Limit\",\"LimitPrice\":{\"lo\":\"1430000\",\"signScale\":12},\"LimitPriceUnitCode\":\"Units\"}},\"PreferredRoute\":{},\"EquityOrderInstruction\":{}},\"CommissionInfo\":{\"EstimatedOrderQuantity\":{\"lo\":\"1000000\",\"signScale\":12},\"EstimatedPrincipalAmount\":{\"lo\":\"143000000\",\"signScale\":13},\"EstimatedCommissionAmount\":{\"lo\":\"650000\",\"signScale\":12}},\"AssetType\":\"MajorAssetType_EquityOption\",\"TimeInForce\":\"Day\",\"OrderTypeCode\":\"Limit\",\"OrderLegs\":[{\"LegID\":\"1001953543149\",\"LegParentSchwabOrderID\":\"1001953543149\",\"Quantity\":{\"lo\":\"1000000\",\"signScale\":12},\"QuantityUnitCodeType\":\"SharesOrUnits\",\"LeavesQuantity\":{\"lo\":\"1000000\",\"signScale\":12},\"BuySellCode\":\"Buy\",\"Security\":{\"SchwabSecurityID\":\"102764181\",\"Symbol\":\"TSLA  241025P00200000\",\"UnderlyingSymbol\":\"TSLA\",\"MajorAssetType\":\"MajorAssetType_EquityOption\",\"PrimaryMarketSymbol\":\"TSLA  241025P00200000\",\"ShortDescriptionText\":\"TESLA INC 10\/25\/2024 $200 Put\",\"ShortName\":\"TESLA INC 10\/25\/2024 $200 Put\",\"CUSIP\":\"0TSLA.VP40200000\",\"OptionsSecurityInfo\":{\"PutCallCode\":\"Put\",\"UnderlyingSchwabSecurityID\":\"1948561409\",\"StrikePrice\":{\"lo\":\"200000000\",\"signScale\":12},\"OptionExpiryDate\":{\"DateTimeString\":\"2024-10-25 00:00:00.000\"}}},\"QuoteOnOrderAcceptance\":{\"Ask\":{\"lo\":\"1420000\",\"signScale\":12},\"AskSize\":{\"lo\":\"145\"},\"Bid\":{\"lo\":\"1410000\",\"signScale\":12},\"BidSize\":{\"lo\":\"3\"},\"QuoteTimestamp\":{\"DateTimeString\":\"2024-10-22 10:22:06.606\"},\"Symbol\":\"TSLA  241025P00200000\",\"QuoteTypeCode\":\"Mark\",\"Mid\":{\"lo\":\"1415000\",\"signScale\":12},\"SchwabOrderID\":\"1001953543149\",\"OptionsQuote\":{\"PutCallCode\":\"Put\"}},\"LegClientRequestInfo\":{\"SecurityId\":\"TSLA  241025P00200000\",\"SecurityIdTypeCd\":\"Symbol\"},\"AccountingRuleCode\":\"Cash\",\"EstimatedNetAmount\":{\"lo\":\"143650000\",\"signScale\":13},\"EstimatedPrincipalAmnt\":{\"lo\":\"143000000\",\"signScale\":13},\"EquityOrderLeg\":{\"EquityOptionsOrderLeg\":{\"OpenClosePositionCode\":\"PC_Open\"}}}],\"OrderCapacityCode\":\"OC_Agency\",\"SettlementType\":\"SettlementType_Regular\",\"Rule80ACode\":73,\"SolicitedCode\":\"Unsolicited\",\"TradeTag\":\"API_TOS:TRADE_ALL\",\"EquityOrder\":{\"TradingSessionCodeOnOrder\":\"REG\"}}}}}}}"},{"seq":8,"key":"Account Activity","1":"54661285","2":"OrderAccepted","3":"{\"SchwabOrderID\":\"1001953543149\",\"AccountNumber\":\"54661285\",\"BaseEvent\":{\"EventType\":\"OrderAccepted\",\"OrderAcceptedEvent\":{\"EventType\":\"OrderAccepted\",\"CreatedTimeStamp\":{\"DateTimeString\":\"2024-10-22 10:22:06.606\"},\"ExpiryTimeStamp\":{\"DateTimeString\":\"2024-10-22\"},\"Status\":\"Open\",\"TradingSessionCodeOnOrderEntry\":\"REG\",\"QuoteOnOrderEntry\":[{\"Ask\":{\"lo\":\"1420000\",\"signScale\":12},\"AskSize\":{\"lo\":\"145\"},\"Bid\":{\"lo\":\"1410000\",\"signScale\":12},\"BidSize\":{\"lo\":\"3\"},\"QuoteTimestamp\":{\"DateTimeString\":\"2024-10-22 10:22:06.606\"},\"Symbol\":\"TSLA  241025P00200000\",\"QuoteTypeCode\":\"Mark\",\"Mid\":{\"lo\":\"1415000\",\"signScale\":12},\"SchwabOrderID\":\"1001953543149\",\"OptionsQuote\":{\"PutCallCode\":\"Put\"}}]}}}"},{"seq":9,"key":"Account Activity","1":"54661285","2":"ExecutionRequested","3":"{\"SchwabOrderID\":\"1001953543149\",\"AccountNumber\":\"54661285\",\"BaseEvent\":{\"EventType\":\"ExecutionRequested\",\"ExecutionRequestedEventRoutedInfo\":{\"EventType\":\"ExecutionRequested\",\"RouteSequenceNumber\":1,\"RouteInfo\":{\"RouteName\":\"SIG_OPT_F2_J2\",\"RouteSequenceNumber\":1,\"RoutedExecutionTimestamp\":{\"DateTimeString\":\"2024-10-22 10:22:06.643\"},\"Quote\":{\"Ask\":{\"lo\":\"1420000\",\"signScale\":12},\"AskSize\":{\"lo\":\"145\"},\"Bid\":{\"lo\":\"1410000\",\"signScale\":12},\"BidSize\":{\"lo\":\"3\"},\"QuoteTimestamp\":{\"DateTimeString\":\"2024-10-22 10:22:06.606\"},\"Symbol\":\"TSLA  241025P00200000\",\"QuoteTypeCode\":\"Mark\",\"Mid\":{\"lo\":\"1415000\",\"signScale\":12},\"SchwabOrderID\":\"1001953543149\",\"OptionsQuote\":{\"PutCallCode\":\"Put\"}},\"RouteRequestedType\":\"New\",\"RoutedQuantity\":{\"lo\":\"1000000\",\"signScale\":12},\"RoutedPrice\":{\"lo\":\"1430000\",\"signScale\":12},\"RouteStatus\":\"RouteCreated\",\"ClientOrderID\":\"1001953543149.1\",\"RoutedTime\":{\"DateTimeString\":\"2024-10-22 10:22:06.643\"},\"RouteTimeInForce\":\"Day\",\"RouteAcknowledgmentTimeStamp\":{}},\"RouteRequestedBy\":\"RR_Broker\",\"LegId\":\"1001953543149\"}}}"}]}]}',
        '{"data":[{"service":"ACCT_ACTIVITY", "timestamp":1729606927750,"command":"SUBS","content":[{"seq":10,"key":"Account Activity","1":"54661285","2":"ExecutionRequestCreated","3":"{\"SchwabOrderID\":\"1001953543149\",\"AccountNumber\":\"54661285\",\"BaseEvent\":{\"EventType\":\"ExecutionRequestCreated\",\"ExecutionRequestCreatedEvent\":{\"EventType\":\"ExecutionRequestCreated\",\"LegId\":\"1001953543149\",\"RouteName\":\"SIG_OPT_F2_J2\",\"RouteRequestType\":\"New\",\"RouteSequenceNumber\":1,\"RouteRequestedBy\":\"RR_Broker\",\"RouteStatus\":\"RouteFixAcknowledged\",\"SenderCompID\":\"CHAS2\",\"RoutedTime\":{\"DateTimeString\":\"2024-10-22 10:22:06.669\"},\"ClientOrderID\":\"1001953543149.1\"}}}"},{"seq":11,"key":"Account Activity","1":"54661285","2":"ExecutionRequestCompleted","3":"{\"SchwabOrderID\":\"1001953543149\",\"AccountNumber\":\"54661285\",\"BaseEvent\":{\"EventType\":\"ExecutionRequestCompleted\",\"ExecutionRequestCompletedEvent\":{\"EventType\":\"ExecutionRequestCompleted\",\"LegId\":\"1001953543149\",\"ResponseType\":\"Accepted\",\"ExecutionTime\":{\"DateTimeString\":\"2024-10-22 10:22:06.777\"},\"RouteSequenceNumber\":1,\"RouteStatus\":\"RouteVenueAccepted\",\"RouteAcknowledgmentTimeStamp\":{\"DateTimeString\":\"2024-10-22 10:22:06.747\"},\"ClientOrderID\":\"1001953543149.1\"}}}"},{"seq":12,"key":"Account Activity","1":"54661285","2":"OrderFillCompleted","3":"{\"SchwabOrderID\":\"1001953543149\",\"AccountNumber\":\"54661285\",\"BaseEvent\":{\"EventType\":\"OrderFillCompleted\",\"OrderFillCompletedEventOrderLegQuantityInfo\":{\"EventType\":\"OrderFillCompleted\",\"LegId\":\"1001953543149\",\"LegStatus\":\"LegClosed\",\"QuantityInfo\":{\"ExecutionID\":\"20241022-EST-ngOMS-13441581673\",\"CumulativeQuantity\":{\"lo\":\"1000000\",\"signScale\":12},\"LeavesQuantity\":{\"signScale\":12},\"AveragePrice\":{\"lo\":\"1420000\",\"signScale\":12}},\"PriceImprovement\":{\"signScale\":12},\"LegSubStatus\":\"LegSubStatusFilled\",\"ExecutionInfo\":{\"ExecutionSequenceNumber\":1,\"ExecutionId\":\"20241022-EST-ngOMS-13441581673\",\"VenueExecutionID\":\"20241022031998\",\"Exchange\":\"CBOE\",\"ExecutionQuantity\":{\"lo\":\"1000000\",\"signScale\":12},\"ExecutionPrice\":{\"lo\":\"1420000\",\"signScale\":12},\"ExecutionTimeStamp\":{\"DateTimeString\":\"2024-10-22 10:22:06.793\"},\"ExecutionTransType\":\"Fill\",\"ExecutionCapacityCode\":\"Agency\",\"RouteName\":\"SIG_OPT_F2_J2\",\"RouteSequenceNumber\":1,\"VenuExecutionTimeStamp\":{\"DateTimeString\":\"2024-10-22 10:22:06.752\"},\"ReportingCapacityCode\":\"RC_Agency\",\"ActualChargedCommissionAmount\":{\"lo\":\"650000\",\"signScale\":12},\"AsOfTimeStamp\":{},\"ActualChargedFeesCommissionAndTax\":{\"StateTaxWithholding\":{\"signScale\":12},\"FederalTaxWithholding\":{\"signScale\":12},\"SECFees\":{\"signScale\":12},\"ORF\":{\"lo\":\"10000\",\"signScale\":12},\"FTT\":{\"signScale\":12},\"TaxWithholding1446\":{\"signScale\":12},\"GoodsAndServicesTax\":{\"signScale\":12},\"IOF\":{\"signScale\":12},\"TAF\":{\"signScale\":12},\"CommissionAmount\":{\"lo\":\"650000\",\"signScale\":12}},\"ClientOrderID\":\"1001953543149.1\"},\"OrderInfoForTransactionPosting\":{\"LimitPrice\":{\"lo\":\"1430000\",\"signScale\":12},\"OrderTypeCode\":\"Limit\",\"OpenClosePositionCode\":\"PC_Open\",\"BuySellCode\":\"Buy\",\"Quantity\":{\"lo\":\"1000000\",\"signScale\":12},\"StopPrice\":{},\"Symbol\":\"TSLA  241025P00200000\",\"SchwabSecurityID\":\"102764181\",\"SolicitedCode\":\"Unsolicited\",\"AccountingRuleCode\":\"Cash\",\"SettlementType\":\"SettlementType_Regular\",\"OrderCreatedUserID\":\"O1XX\",\"OrderCreatedUserType\":\"Venue\",\"ClientProductCode\":\"N1\"}}}}"}]}]}',
        '{"data":[{"service":"ACCT_ACTIVITY", "timestamp":1729607054085,"command":"SUBS","content":[{"seq":13,"key":"Account Activity","1":"54661285","2":"OrderCreated","3":"{\"SchwabOrderID\":\"1001953543346\",\"AccountNumber\":\"54661285\",\"BaseEvent\":{\"EventType\":\"OrderCreated\",\"OrderCreatedEventEquityOrder\":{\"EventType\":\"OrderCreated\",\"Order\":{\"SchwabOrderID\":\"1001953543346\",\"AccountNumber\":\"54661285\",\"Order\":{\"AccountInfo\":{\"AccountNumber\":\"54661285\",\"AccountBranch\":\"WT\",\"CustomerOrFirmCode\":\"CustomerOrFirmCode_Customer\",\"OrderPlacementCustomerID\":\"353286754\",\"AccountState\":\"MO\",\"AccountTypeCode\":\"Customer\"},\"ClientChannelInfo\":{\"ClientProductCode\":\"M1\",\"EventUserID\":\"O1XX\",\"EventUserType\":\"Client\"},\"LifecycleCreatedTimestamp\":{\"DateTimeString\":\"2024-10-22 10:24:13.960\"},\"LifecycleSchwabOrderID\":\"1001953543346\",\"EntryTimestamp\":{\"DateTimeString\":\"2024-10-22 10:24:13.960\"},\"ExpiryTimeStamp\":{\"DateTimeString\":\"2024-10-22\"},\"AutoConfirm\":true,\"PlanSubmitDate\":{\"DateTimeString\":\"2024-10-22\"},\"SourceOMS\":\"ngOMS\",\"FirmID\":\"CHAS\",\"OrderAccount\":\"TDAAccount\",\"AssetOrderEquityOrderLeg\":{\"OrderInstruction\":{\"HandlingInstructionCode\":\"AutomatedExecutionNoIntervention\",\"ExecutionStrategy\":{\"Type\":\"ES_Limit\",\"LimitExecutionStrategy\":{\"Type\":\"ES_Limit\",\"LimitPrice\":{\"lo\":\"1430000\",\"signScale\":12},\"LimitPriceUnitCode\":\"Units\"}},\"PreferredRoute\":{},\"EquityOrderInstruction\":{}},\"CommissionInfo\":{\"EstimatedOrderQuantity\":{\"lo\":\"1000000\",\"signScale\":12},\"EstimatedPrincipalAmount\":{\"lo\":\"143000000\",\"signScale\":12},\"EstimatedCommissionAmount\":{\"lo\":\"650000\",\"signScale\":12}},\"AssetType\":\"MajorAssetType_EquityOption\",\"TimeInForce\":\"Day\",\"OrderTypeCode\":\"Limit\",\"OrderLegs\":[{\"LegID\":\"1001953543346\",\"LegParentSchwabOrderID\":\"1001953543346\",\"Quantity\":{\"lo\":\"1000000\",\"signScale\":12},\"QuantityUnitCodeType\":\"SharesOrUnits\",\"LeavesQuantity\":{\"lo\":\"1000000\",\"signScale\":12},\"BuySellCode\":\"Sell\",\"Security\":{\"SchwabSecurityID\":\"102764181\",\"Symbol\":\"TSLA  241025P00200000\",\"UnderlyingSymbol\":\"TSLA\",\"MajorAssetType\":\"MajorAssetType_EquityOption\",\"PrimaryMarketSymbol\":\"TSLA  241025P00200000\",\"ShortDescriptionText\":\"TESLA INC 10\/25\/2024 $200 Put\",\"ShortName\":\"TESLA INC 10\/25\/2024 $200 Put\",\"CUSIP\":\"0TSLA.VP40200000\",\"OptionsSecurityInfo\":{\"PutCallCode\":\"Put\",\"UnderlyingSchwabSecurityID\":\"1948561409\",\"StrikePrice\":{\"lo\":\"200000000\",\"signScale\":12},\"OptionExpiryDate\":{\"DateTimeString\":\"2024-10-25 00:00:00.000\"}}},\"QuoteOnOrderAcceptance\":{\"Ask\":{\"lo\":\"1430000\",\"signScale\":12},\"AskSize\":{\"lo\":\"15\"},\"Bid\":{\"lo\":\"1410000\",\"signScale\":12},\"BidSize\":{\"lo\":\"231\"},\"QuoteTimestamp\":{\"DateTimeString\":\"2024-10-22 10:24:13.960\"},\"Symbol\":\"TSLA  241025P00200000\",\"QuoteTypeCode\":\"Mark\",\"Mid\":{\"lo\":\"1420000\",\"signScale\":13},\"SchwabOrderID\":\"1001953543346\",\"OptionsQuote\":{\"PutCallCode\":\"Put\"}},\"LegClientRequestInfo\":{\"SecurityId\":\"TSLA  241025P00200000\",\"SecurityIdTypeCd\":\"Symbol\"},\"AccountingRuleCode\":\"Cash\",\"EstimatedNetAmount\":{\"lo\":\"142350000\",\"signScale\":12},\"EstimatedPrincipalAmnt\":{\"lo\":\"143000000\",\"signScale\":12},\"EquityOrderLeg\":{\"EquityOptionsOrderLeg\":{\"OpenClosePositionCode\":\"PC_Close\"}}}],\"OrderCapacityCode\":\"OC_Agency\",\"SettlementType\":\"SettlementType_Regular\",\"Rule80ACode\":73,\"SolicitedCode\":\"Unsolicited\",\"TradeTag\":\"API_TOS:POS_STMT\",\"EquityOrder\":{\"TradingSessionCodeOnOrder\":\"REG\"}}}}}}}"},{"seq":14,"key":"Account Activity","1":"54661285","2":"OrderAccepted","3":"{\"SchwabOrderID\":\"1001953543346\",\"AccountNumber\":\"54661285\",\"BaseEvent\":{\"EventType\":\"OrderAccepted\",\"OrderAcceptedEvent\":{\"EventType\":\"OrderAccepted\",\"CreatedTimeStamp\":{\"DateTimeString\":\"2024-10-22 10:24:13.960\"},\"ExpiryTimeStamp\":{\"DateTimeString\":\"2024-10-22\"},\"Status\":\"Open\",\"TradingSessionCodeOnOrderEntry\":\"REG\",\"QuoteOnOrderEntry\":[{\"Ask\":{\"lo\":\"1430000\",\"signScale\":12},\"AskSize\":{\"lo\":\"15\"},\"Bid\":{\"lo\":\"1410000\",\"signScale\":12},\"BidSize\":{\"lo\":\"231\"},\"QuoteTimestamp\":{\"DateTimeString\":\"2024-10-22 10:24:13.960\"},\"Symbol\":\"TSLA  241025P00200000\",\"QuoteTypeCode\":\"Mark\",\"Mid\":{\"lo\":\"1420000\",\"signScale\":13},\"SchwabOrderID\":\"1001953543346\",\"OptionsQuote\":{\"PutCallCode\":\"Put\"}}]}}}"},{"seq":15,"key":"Account Activity","1":"54661285","2":"ExecutionRequested","3":"{\"SchwabOrderID\":\"1001953543346\",\"AccountNumber\":\"54661285\",\"BaseEvent\":{\"EventType\":\"ExecutionRequested\",\"ExecutionRequestedEventRoutedInfo\":{\"EventType\":\"ExecutionRequested\",\"RouteSequenceNumber\":1,\"RouteInfo\":{\"RouteName\":\"CES_OPT_F1_J1\",\"RouteSequenceNumber\":1,\"RoutedExecutionTimestamp\":{\"DateTimeString\":\"2024-10-22 10:24:13.999\"},\"Quote\":{\"Ask\":{\"lo\":\"1430000\",\"signScale\":12},\"AskSize\":{\"lo\":\"15\"},\"Bid\":{\"lo\":\"1410000\",\"signScale\":12},\"BidSize\":{\"lo\":\"231\"},\"QuoteTimestamp\":{\"DateTimeString\":\"2024-10-22 10:24:13.960\"},\"Symbol\":\"TSLA  241025P00200000\",\"QuoteTypeCode\":\"Mark\",\"Mid\":{\"lo\":\"1420000\",\"signScale\":13},\"SchwabOrderID\":\"1001953543346\",\"OptionsQuote\":{\"PutCallCode\":\"Put\"}},\"RouteRequestedType\":\"New\",\"RoutedQuantity\":{\"lo\":\"1000000\",\"signScale\":12},\"RoutedPrice\":{\"lo\":\"1430000\",\"signScale\":12},\"RouteStatus\":\"RouteCreated\",\"ClientOrderID\":\"1001953543346.1\",\"RoutedTime\":{\"DateTimeString\":\"2024-10-22 10:24:13.999\"},\"RouteTimeInForce\":\"Day\",\"RouteAcknowledgmentTimeStamp\":{}},\"RouteRequestedBy\":\"RR_Broker\",\"LegId\":\"1001953543346\"}}}"}]}]}',
        '{"data":[{"service":"ACCT_ACTIVITY", "timestamp":1729607055095,"command":"SUBS","content":[{"seq":16,"key":"Account Activity","1":"54661285","2":"ExecutionRequestCreated","3":"{\"SchwabOrderID\":\"1001953543346\",\"AccountNumber\":\"54661285\",\"BaseEvent\":{\"EventType\":\"ExecutionRequestCreated\",\"ExecutionRequestCreatedEvent\":{\"EventType\":\"ExecutionRequestCreated\",\"LegId\":\"1001953543346\",\"RouteName\":\"CES_OPT_F1_J1\",\"RouteRequestType\":\"New\",\"RouteSequenceNumber\":1,\"RouteRequestedBy\":\"RR_Broker\",\"RouteStatus\":\"RouteFixAcknowledged\",\"SenderCompID\":\"CHASOPT2\",\"RoutedTime\":{\"DateTimeString\":\"2024-10-22 10:24:14.022\"},\"ClientOrderID\":\"1001953543346.1\"}}}"},{"seq":17,"key":"Account Activity","1":"54661285","2":"ExecutionRequestCompleted","3":"{\"SchwabOrderID\":\"1001953543346\",\"AccountNumber\":\"54661285\",\"BaseEvent\":{\"EventType\":\"ExecutionRequestCompleted\",\"ExecutionRequestCompletedEvent\":{\"EventType\":\"ExecutionRequestCompleted\",\"LegId\":\"1001953543346\",\"ResponseType\":\"Accepted\",\"ExecutionTime\":{\"DateTimeString\":\"2024-10-22 10:24:14.078\"},\"RouteSequenceNumber\":1,\"RouteStatus\":\"RouteVenueAccepted\",\"RouteAcknowledgmentTimeStamp\":{\"DateTimeString\":\"2024-10-22 10:24:14.048\"},\"ClientOrderID\":\"1001953543346.1\"}}}"}]}]}',
        '{"data":[{"service":"ACCT_ACTIVITY", "timestamp":1729607079037,"command":"SUBS","content":[{"seq":18,"key":"Account Activity","1":"54661285","2":"ChangeCreated","3":"{\"SchwabOrderID\":\"1001953543389\",\"AccountNumber\":\"54661285\",\"BaseEvent\":{\"EventType\":\"ChangeCreated\",\"ChangeCreatedEventEquityOrder\":{\"EventType\":\"ChangeCreated\",\"Order\":{\"SchwabOrderID\":\"1001953543389\",\"AccountNumber\":\"54661285\",\"Order\":{\"AccountInfo\":{\"AccountNumber\":\"54661285\",\"AccountBranch\":\"WT\",\"CustomerOrFirmCode\":\"CustomerOrFirmCode_Customer\",\"OrderPlacementCustomerID\":\"353286754\",\"AccountState\":\"MO\",\"AccountTypeCode\":\"Customer\"},\"ClientChannelInfo\":{\"ClientProductCode\":\"M1\",\"EventUserID\":\"O1XX\",\"EventUserType\":\"Client\"},\"LifecycleCreatedTimestamp\":{\"DateTimeString\":\"2024-10-22 10:24:13.960\"},\"LifecycleSchwabOrderID\":\"1001953543346\",\"EntryTimestamp\":{\"DateTimeString\":\"2024-10-22 10:24:38.926\"},\"ExpiryTimeStamp\":{\"DateTimeString\":\"2024-10-22\"},\"AutoConfirm\":true,\"PlanSubmitDate\":{\"DateTimeString\":\"2024-10-22\"},\"SourceOMS\":\"ngOMS\",\"FirmID\":\"CHAS\",\"OrderAccount\":\"TDAAccount\",\"AssetOrderEquityOrderLeg\":{\"OrderInstruction\":{\"HandlingInstructionCode\":\"AutomatedExecutionNoIntervention\",\"ExecutionStrategy\":{\"Type\":\"ES_Limit\",\"LimitExecutionStrategy\":{\"Type\":\"ES_Limit\",\"LimitPrice\":{\"lo\":\"1420000\",\"signScale\":12},\"LimitPriceUnitCode\":\"Units\"}},\"PreferredRoute\":{},\"EquityOrderInstruction\":{}},\"CommissionInfo\":{\"EstimatedOrderQuantity\":{\"lo\":\"1000000\",\"signScale\":12},\"EstimatedPrincipalAmount\":{\"lo\":\"142000000\",\"signScale\":12},\"EstimatedCommissionAmount\":{\"lo\":\"650000\",\"signScale\":12}},\"AssetType\":\"MajorAssetType_EquityOption\",\"TimeInForce\":\"Day\",\"OrderTypeCode\":\"Limit\",\"OrderLegs\":[{\"LegID\":\"1001953543389\",\"LegParentSchwabOrderID\":\"1001953543389\",\"Quantity\":{\"lo\":\"1000000\",\"signScale\":12},\"QuantityUnitCodeType\":\"SharesOrUnits\",\"LeavesQuantity\":{\"lo\":\"1000000\",\"signScale\":12},\"BuySellCode\":\"Sell\",\"Security\":{\"SchwabSecurityID\":\"102764181\",\"Symbol\":\"TSLA  241025P00200000\",\"UnderlyingSymbol\":\"TSLA\",\"MajorAssetType\":\"MajorAssetType_EquityOption\",\"PrimaryMarketSymbol\":\"TSLA  241025P00200000\",\"ShortDescriptionText\":\"TESLA INC 10\/25\/2024 $200 Put\",\"ShortName\":\"TESLA INC 10\/25\/2024 $200 Put\",\"CUSIP\":\"0TSLA.VP40200000\",\"OptionsSecurityInfo\":{\"PutCallCode\":\"Put\",\"UnderlyingSchwabSecurityID\":\"1948561409\",\"StrikePrice\":{\"lo\":\"200000000\",\"signScale\":12},\"OptionExpiryDate\":{\"DateTimeString\":\"2024-10-25 00:00:00.000\"}}},\"QuoteOnOrderAcceptance\":{\"Ask\":{\"lo\":\"1430000\",\"signScale\":12},\"AskSize\":{\"lo\":\"1\"},\"Bid\":{\"lo\":\"1420000\",\"signScale\":12},\"BidSize\":{\"lo\":\"52\"},\"QuoteTimestamp\":{\"DateTimeString\":\"2024-10-22 10:24:38.926\"},\"Symbol\":\"TSLA  241025P00200000\",\"QuoteTypeCode\":\"Mark\",\"Mid\":{\"lo\":\"1425000\",\"signScale\":13},\"SchwabOrderID\":\"1001953543389\",\"OptionsQuote\":{\"PutCallCode\":\"Put\"}},\"LegClientRequestInfo\":{\"SecurityId\":\"TSLA  241025P00200000\",\"SecurityIdTypeCd\":\"Symbol\"},\"AccountingRuleCode\":\"Cash\",\"EstimatedNetAmount\":{\"lo\":\"141350000\",\"signScale\":12},\"EstimatedPrincipalAmnt\":{\"lo\":\"142000000\",\"signScale\":12},\"EquityOrderLeg\":{\"EquityOptionsOrderLeg\":{\"OpenClosePositionCode\":\"PC_Close\"}}}],\"OrderCapacityCode\":\"OC_Agency\",\"SettlementType\":\"SettlementType_Regular\",\"Rule80ACode\":73,\"SolicitedCode\":\"Unsolicited\",\"TradeTag\":\"API_TOS:POS_STMT\",\"EquityOrder\":{\"TradingSessionCodeOnOrder\":\"REG\"}}}},\"ParentSchwabOrderID\":\"1001953543346\",\"LifecycleSchwabOrderID\":\"1001953543346\"}}}"},{"seq":19,"key":"Account Activity","1":"54661285","2":"ChangeAccepted","3":"{\"SchwabOrderID\":\"1001953543389\",\"AccountNumber\":\"54661285\",\"BaseEvent\":{\"EventType\":\"ChangeAccepted\",\"ChangeAcceptedEvent\":{\"EventType\":\"ChangeAccepted\",\"CreatedTimeStamp\":{\"DateTimeString\":\"2024-10-22 10:24:38.926\"},\"ExpiryTimeStamp\":{\"DateTimeString\":\"2024-10-22\"},\"TradingSessionCodeOnOrderEntry\":\"REG\",\"QuoteOnOrderEntry\":[{\"Ask\":{\"lo\":\"1430000\",\"signScale\":12},\"AskSize\":{\"lo\":\"1\"},\"Bid\":{\"lo\":\"1420000\",\"signScale\":12},\"BidSize\":{\"lo\":\"52\"},\"QuoteTimestamp\":{\"DateTimeString\":\"2024-10-22 10:24:38.926\"},\"Symbol\":\"TSLA  241025P00200000\",\"QuoteTypeCode\":\"Mark\",\"Mid\":{\"lo\":\"1425000\",\"signScale\":13},\"SchwabOrderID\":\"1001953543389\",\"OptionsQuote\":{\"PutCallCode\":\"Put\"}}],\"Status\":\"Open\",\"LegStatus\":\"LegOpen\",\"LegInfoUpdate\":[{\"LegId\":\"1001953543389\",\"AccountingRuleCode\":\"Cash\",\"IntendedOrderQuantity\":{\"lo\":\"1000000\",\"signScale\":12},\"PreviousLegId\":\"1001953543346\"}]}}}"},{"seq":20,"key":"Account Activity","1":"54661285","2":"CancelAccepted","3":"{\"SchwabOrderID\":\"1001953543346\",\"AccountNumber\":\"54661285\",\"BaseEvent\":{\"EventType\":\"CancelAccepted\",\"CancelAcceptedEvent\":{\"EventType\":\"CancelAccepted\",\"LifecycleSchwabOrderID\":\"1001953543346\",\"PlanSubmitDate\":{\"DateTimeString\":\"2024-10-22\"},\"ClientProductCode\":\"M1\",\"AutoConfirm\":true,\"CancelTimeStamp\":{\"DateTimeString\":\"2024-10-22 10:24:38.963\"},\"LegCancelRequestInfoList\":[{\"LegID\":\"1001953543346\",\"IntendedOrderQuantity\":{\"lo\":\"1000000\",\"signScale\":12},\"ChangedNewOrderID\":\"1001953543389\",\"RequestedAmount\":{\"lo\":\"1000000\",\"signScale\":12},\"LegStatus\":\"LegOpen\",\"LegSubStatus\":\"LegSubStatusCancelled\",\"ChangedNewSchwabOrderId\":\"1001953543389\",\"CancelAcceptedTime\":{\"DateTimeString\":\"2024-10-22 10:24:38.963\"},\"EventUserID\":\"O1XX\"}],\"CancelRequestType\":\"ClientCancel\"}}}"}]}]}',
        '{"data":[{"service":"ACCT_ACTIVITY", "timestamp":1729607080045,"command":"SUBS","content":[{"seq":21,"key":"Account Activity","1":"54661285","2":"ExecutionRequested","3":"{\"SchwabOrderID\":\"1001953543346\",\"AccountNumber\":\"54661285\",\"BaseEvent\":{\"EventType\":\"ExecutionRequested\",\"ExecutionRequestedEventRoutedInfo\":{\"EventType\":\"ExecutionRequested\",\"RouteSequenceNumber\":2,\"RouteInfo\":{\"RouteName\":\"CES_OPT_F1_J1\",\"RouteSequenceNumber\":2,\"RoutedExecutionTimestamp\":{\"DateTimeString\":\"2024-10-22 10:24:38.964\"},\"Quote\":{\"Ask\":{\"lo\":\"1430000\",\"signScale\":12},\"AskSize\":{\"lo\":\"15\"},\"Bid\":{\"lo\":\"1410000\",\"signScale\":12},\"BidSize\":{\"lo\":\"231\"},\"QuoteTimestamp\":{\"DateTimeString\":\"2024-10-22 10:24:13.960\"},\"Symbol\":\"TSLA  241025P00200000\",\"QuoteTypeCode\":\"Mark\",\"Mid\":{\"lo\":\"1420000\",\"signScale\":13},\"SchwabOrderID\":\"1001953543346\",\"OptionsQuote\":{\"PutCallCode\":\"Put\"}},\"RouteRequestedType\":\"Cancel\",\"RoutedQuantity\":{\"lo\":\"1000000\",\"signScale\":12},\"RoutedPrice\":{\"lo\":\"1430000\",\"signScale\":12},\"RouteStatus\":\"RouteCreated\",\"ClientOrderID\":\"1001953543346.2\",\"RoutedTime\":{\"DateTimeString\":\"2024-10-22 10:24:38.964\"},\"RouteTimeInForce\":\"Day\",\"RouteAcknowledgmentTimeStamp\":{}},\"RouteRequestedBy\":\"RR_Broker\",\"LegId\":\"1001953543346\"}}}"},{"seq":22,"key":"Account Activity","1":"54661285","2":"ExecutionRequestCompleted","3":"{\"SchwabOrderID\":\"1001953543346\",\"AccountNumber\":\"54661285\",\"BaseEvent\":{\"EventType\":\"ExecutionRequestCompleted\",\"ExecutionRequestCompletedEvent\":{\"EventType\":\"ExecutionRequestCompleted\",\"LegId\":\"1001953543346\",\"ResponseType\":\"Accepted\",\"ExecutionTime\":{\"DateTimeString\":\"2024-10-22 10:24:39.083\"},\"RouteSequenceNumber\":1,\"RouteStatus\":\"RouteVenueAccepted\",\"RouteAcknowledgmentTimeStamp\":{\"DateTimeString\":\"2024-10-22 10:24:39.052\"},\"ClientOrderID\":\"1001953543390\"}}}"},{"seq":23,"key":"Account Activity","1":"54661285","2":"ExecutionCreated","3":"{\"SchwabOrderID\":\"1001953543346\",\"AccountNumber\":\"54661285\",\"BaseEvent\":{\"EventType\":\"ExecutionCreated\",\"ExecutionCreatedEventExecutionInfo\":{\"EventType\":\"ExecutionCreated\",\"LegId\":\"1001953543346\",\"ExecutionInfo\":{\"ExecutionSequenceNumber\":1,\"ExecutionId\":\"20241022-EST-ngOMS-13441581773\",\"ExecutionQuantity\":{\"lo\":\"1000000\",\"signScale\":12},\"ExecutionTimeStamp\":{\"DateTimeString\":\"2024-10-22 10:24:39.098\"},\"ExecutionTransType\":\"UROut\",\"ExecutionCapacityCode\":\"Agency\",\"RouteName\":\"CES_OPT_F1_J1\",\"RouteSequenceNumber\":1,\"VenuExecutionTimeStamp\":{\"DateTimeString\":\"2024-10-22 10:24:39.098\"},\"CancelType\":\"ClientCancel\",\"ReportingCapacityCode\":\"RC_Agency\",\"AsOfTimeStamp\":{},\"ClientOrderID\":\"1001953543346.1\"},\"AsOfTimeStamp\":{\"DateTimeString\":\"2024-10-22 10:24:39.098\"},\"RouteSequenceNumber\":1}}}"},{"seq":24,"key":"Account Activity","1":"54661285","2":"ExecutionRequested","3":"{\"SchwabOrderID\":\"1001953543389\",\"AccountNumber\":\"54661285\",\"BaseEvent\":{\"EventType\":\"ExecutionRequested\",\"ExecutionRequestedEventRoutedInfo\":{\"EventType\":\"ExecutionRequested\",\"RouteSequenceNumber\":1,\"RouteInfo\":{\"RouteName\":\"WOLF_OPT_F3_J2\",\"RouteSequenceNumber\":1,\"RoutedExecutionTimestamp\":{\"DateTimeString\":\"2024-10-22 10:24:39.100\"},\"Quote\":{\"Ask\":{\"lo\":\"1430000\",\"signScale\":12},\"AskSize\":{\"lo\":\"1\"},\"Bid\":{\"lo\":\"1420000\",\"signScale\":12},\"BidSize\":{\"lo\":\"52\"},\"QuoteTimestamp\":{\"DateTimeString\":\"2024-10-22 10:24:38.926\"},\"Symbol\":\"TSLA  241025P00200000\",\"QuoteTypeCode\":\"Mark\",\"Mid\":{\"lo\":\"1425000\",\"signScale\":13},\"SchwabOrderID\":\"1001953543389\",\"OptionsQuote\":{\"PutCallCode\":\"Put\"}},\"RouteRequestedType\":\"New\",\"RoutedQuantity\":{\"lo\":\"1000000\",\"signScale\":12},\"RoutedPrice\":{\"lo\":\"1420000\",\"signScale\":12},\"RouteStatus\":\"RouteCreated\",\"ClientOrderID\":\"1001953543389.1\",\"RoutedTime\":{\"DateTimeString\":\"2024-10-22 10:24:39.100\"},\"RouteTimeInForce\":\"Day\",\"RouteAcknowledgmentTimeStamp\":{}},\"RouteRequestedBy\":\"RR_Broker\",\"LegId\":\"1001953543389\"}}}"},{"seq":25,"key":"Account Activity","1":"54661285","2":"OrderUROutCompleted","3":"{\"SchwabOrderID\":\"1001953543346\",\"AccountNumber\":\"54661285\",\"BaseEvent\":{\"EventType\":\"OrderUROutCompleted\",\"OrderUROutCompletedEvent\":{\"EventType\":\"OrderUROutCompleted\",\"LegId\":\"1001953543346\",\"ExecutionId\":\"20241022-EST-ngOMS-13441581773\",\"LeavesQuantity\":{},\"CancelQuantity\":{\"lo\":\"1000000\",\"signScale\":12},\"LegStatus\":\"LegClosed\",\"LegSubStatus\":\"LegSubStatusCancelled\",\"OutCancelType\":\"ClientCancel\",\"VenueExecutionTimeStamp\":{\"DateTimeString\":\"2024-10-22 10:24:39.098\"},\"ExecutionTimeStamp\":{\"DateTimeString\":\"2024-10-22 10:24:39.098\"},\"RouteName\":\"CES_OPT_F1_J1\"}}}"},{"seq":26,"key":"Account Activity","1":"54661285","2":"ExecutionRequestCreated","3":"{\"SchwabOrderID\":\"1001953543389\",\"AccountNumber\":\"54661285\",\"BaseEvent\":{\"EventType\":\"ExecutionRequestCreated\",\"ExecutionRequestCreatedEvent\":{\"EventType\":\"ExecutionRequestCreated\",\"LegId\":\"1001953543389\",\"RouteName\":\"WOLF_OPT_F3_J2\",\"RouteRequestType\":\"New\",\"RouteSequenceNumber\":1,\"RouteRequestedBy\":\"RR_Broker\",\"RouteStatus\":\"RouteFixAcknowledged\",\"SenderCompID\":\"TDSCHW_OPT_PROD2\",\"RoutedTime\":{\"DateTimeString\":\"2024-10-22 10:24:39.125\"},\"ClientOrderID\":\"1001953543389.1\"}}}"},{"seq":27,"key":"Account Activity","1":"54661285","2":"ExecutionRequestCompleted","3":"{\"SchwabOrderID\":\"1001953543389\",\"AccountNumber\":\"54661285\",\"BaseEvent\":{\"EventType\":\"ExecutionRequestCompleted\",\"ExecutionRequestCompletedEvent\":{\"EventType\":\"ExecutionRequestCompleted\",\"LegId\":\"1001953543389\",\"ResponseType\":\"Accepted\",\"ExecutionTime\":{\"DateTimeString\":\"2024-10-22 10:24:39.555\"},\"RouteSequenceNumber\":1,\"RouteStatus\":\"RouteVenueAccepted\",\"RouteAcknowledgmentTimeStamp\":{\"DateTimeString\":\"2024-10-22 10:24:39.523\"},\"ClientOrderID\":\"1001953543389.1\"}}}"},{"seq":28,"key":"Account Activity","1":"54661285","2":"OrderFillCompleted","3":"{\"SchwabOrderID\":\"1001953543389\",\"AccountNumber\":\"54661285\",\"BaseEvent\":{\"EventType\":\"OrderFillCompleted\",\"OrderFillCompletedEventOrderLegQuantityInfo\":{\"EventType\":\"OrderFillCompleted\",\"LegId\":\"1001953543389\",\"LegStatus\":\"LegClosed\",\"QuantityInfo\":{\"ExecutionID\":\"20241022-EST-ngOMS-13441581775\",\"CumulativeQuantity\":{\"lo\":\"1000000\",\"signScale\":12},\"LeavesQuantity\":{\"signScale\":12},\"AveragePrice\":{\"lo\":\"1420000\",\"signScale\":12}},\"PriceImprovement\":{\"signScale\":12},\"LegSubStatus\":\"LegSubStatusFilled\",\"ExecutionInfo\":{\"ExecutionSequenceNumber\":1,\"ExecutionId\":\"20241022-EST-ngOMS-13441581775\",\"VenueExecutionID\":\"2JWZ-1C32-35JF-3\",\"Exchange\":\"CBOE\",\"ExecutionQuantity\":{\"lo\":\"1000000\",\"signScale\":12},\"ExecutionPrice\":{\"lo\":\"1420000\",\"signScale\":12},\"ExecutionTimeStamp\":{\"DateTimeString\":\"2024-10-22 10:24:39.572\"},\"ExecutionTransType\":\"Fill\",\"ExecutionCapacityCode\":\"Agency\",\"RouteName\":\"WOLF_OPT_F3_J2\",\"RouteSequenceNumber\":1,\"VenuExecutionTimeStamp\":{\"DateTimeString\":\"2024-10-22 10:24:39.523\"},\"ReportingCapacityCode\":\"RC_Agency\",\"ActualChargedCommissionAmount\":{\"lo\":\"650000\",\"signScale\":12},\"AsOfTimeStamp\":{},\"ActualChargedFeesCommissionAndTax\":{\"StateTaxWithholding\":{\"signScale\":12},\"FederalTaxWithholding\":{\"signScale\":12},\"SECFees\":{\"signScale\":12},\"ORF\":{\"lo\":\"10000\",\"signScale\":12},\"FTT\":{\"signScale\":12},\"TaxWithholding1446\":{\"signScale\":12},\"GoodsAndServicesTax\":{\"signScale\":12},\"IOF\":{\"signScale\":12},\"TAF\":{\"signScale\":12},\"CommissionAmount\":{\"lo\":\"650000\",\"signScale\":12}},\"ClientOrderID\":\"1001953543389.1\"},\"OrderInfoForTransactionPosting\":{\"LimitPrice\":{\"lo\":\"1420000\",\"signScale\":12},\"OrderTypeCode\":\"Limit\",\"OpenClosePositionCode\":\"PC_Close\",\"BuySellCode\":\"Sell\",\"Quantity\":{\"lo\":\"1000000\",\"signScale\":12},\"StopPrice\":{},\"Symbol\":\"TSLA  241025P00200000\",\"SchwabSecurityID\":\"102764181\",\"SolicitedCode\":\"Unsolicited\",\"AccountingRuleCode\":\"Cash\",\"SettlementType\":\"SettlementType_Regular\",\"OrderCreatedUserID\":\"O1XX\",\"OrderCreatedUserType\":\"Venue\",\"ClientProductCode\":\"N1\"}}}}"}]}]}'
    ]
    
    for trade in testList:
        streamer.my_handler(trade)


